I"3<p>这一篇将主要介绍因果推断中的基本概念以及分配机制的几种类型。</p>

<h2 id="causality-the-basic-framework">Causality: The Basic Framework</h2>

<blockquote>
  <p>“No causation without manipulation”</p>
</blockquote>

<p>在生活中，我们多多少少会接触到有关因果性的问题，通常来说，这样的问题往往会涉及到一个处理（treatment)以及其对应的结果（outcome)，比如我们关心服用阿司匹林对于缓解头痛是否有效，这时我们可以把服用药物与否看作一个处理（treatment），其对应的结果（outcome）就是服药或不服药之后头痛的缓解情况。正如Rubin所讲到的<strong>“no causation without manipulation”</strong>，根据这样的一个思路，我们可以引入一些基本的概念。</p>

<h3 id="potenial-outcomes">Potenial Outcomes</h3>
<p>在这里我们所提到的因果关系主要是与对于某一个个体进行某种处理或操作相联系的。这个个体可以是某个特定时间下的一个人、一个公司或者是一个子群体。为什么要强调某一个特定的时间呢？这是因为我们通常认为同一个对象哪怕是在不同的时间下也应被看作为两个不同的个体。这也是比较好理解的，因为随着时间变化，每个对象自身的条件也会发生变化。（举个不严谨的例子，人的细胞每七年更新一次，现在的你已经不是七年前的你了）。</p>

<p>既然不同时间的同一对象不能被当作同一个体，那定义一个个体在不同处理方式下的结果就需要一点想象了。拿吃药的例子来说，一个人在一个时间点上只能选择吃药或者不吃药，所谓鱼和熊掌不可兼得，对于一个个体，我们只能观测到其在一种处理方式下的结果，这时潜在结果（Potential Outcome)的概念就要上场了。</p>

<p>我们主要讨论处理变量只有两种水平的情形，通常我们把两种水平中较为主动的那一种称为主动处理（active treatment），较为被动的那一种称为控制（control treatment）。有时为了简便起见，在不引起混淆的情况下也可以直接称主动处理为处理（treatment），称被动处理为控制（control）。给定一个个体以及对该个体的处理方式，可以定义该个体在接受不同处理方式下对应的结果，称其为潜在结果（Potential Outcome）。<em>潜在</em>在这里的含义是说不同处理方式下的结果我们只能观测到一个，比如说，如果一个时间点下一个患者选择了吃药，我们观测到的就是在这个点吃药之后患者的某种指标值，我们无法让时间倒退回去重新做选择，因此只能想象假如当时没有吃药，患者的指标值会是什么样一个结果，而这个结果就是对应不吃药情形下下的潜在结果。一般来说，我们需要对处理方案有一个精确的描述，这样与之对应的潜在结果才是良定义的，即它不产生歧义，有一个明确的含义。</p>

<h3 id="definition-of-causal-effects">Definition of Causal Effects</h3>

<p>定义了潜在结果之后，我们就可以接着考虑因果效应该如何定义了。先考虑单个个体的情形，还是用服用阿司匹林治疗头痛的例子，对于一个个体来说，服用阿司匹林和不服用对应着两种不同的潜在结果，在假设其已知的情况下，我们可以通过比较两个潜在结果来研究服用阿司匹林和缓解头痛之间的因果效应，这就包含了四种可能的情形：</p>

<ul>
  <li>服用阿司匹林后不头痛，不服用头痛</li>
  <li>服用阿司匹林或者不服用后都不头痛</li>
  <li>服用阿司匹林或者不服用后都头痛</li>
  <li>服用阿司匹林后头痛，不服用不头痛</li>
</ul>

<p>第二种和第三种情形都说明服用阿司匹林是没有因果效应的，而第一种和第四种都说明服用阿司匹林有因果效应，第一种有缓解头痛的效应，第四种有引起头痛的效应。</p>

<p>需要注意的是，因果效应的定义不依赖于我们真实观测到的潜在结果是哪一种，且它是同一个体在同一时间下不同处理水平所对应的潜在结果之间的比较。也正是因为这个原因让因果推断问题变得相对苦难，因为我们无法同时观测到同一个体在不同处理方式下的潜在结果，从而无法直接研究处理对个体的因果效应。</p>

<h3 id="multiple-units-and-sutva">Multiple Units and SUTVA</h3>

<h4 id="multiple-units">Multiple Units</h4>

<p>既然一个个体我们只能观测到一种潜在结果，那是否可以通过搜集更多个体的数据来进行因果推断呢？这样的做法通常有两种，一种是对于同一对象在不同时间点观测多次，这种通常适用于一些无生命体征的个体，比如通过在不同时间开关水龙头，我们可以去推断水龙头是否漏水，因为假设时间变化不会对无生命的个体带来改变是合理的。但这往往不适用于人（或其他生命体），因为随着时间变化，人的体征可能会有所改变，同一个在早上和晚上对于药物的敏感程度可能是不同的。</p>

<p>还有一种选择是在同一时间点观测多个不同的个体。比如，A和B同时都有感冒的症状，其中一个服用了某种药物，一个未服用药物，那我们是否可以通过比较这两者之后的感冒的缓解情况来推断服用该药物对治疗感冒是否有用呢？暂时还不行。原因是A和B之间的潜在结果可能是会相互影响的，可能A在服用了药物后是可以恢复的，但是由于B未服用药物，其感冒一直未恢复，那么B是可能把感冒传染给A的。因此，即使我们观测到了多个个体的数据，也需要对场景进行一定的假定，才能使得因果推断的问题进一步推进。</p>

<h4 id="the-stable-unit-treatment-value-assumptionsutva">The Stable Unit Treatment Value Assumption(SUTVA)</h4>

<p>SUTVA假定说任意一个个体的潜在结果都不依赖于其他个体的处理水平，并且，对于每个个体而言，每个处理水平对应的潜在结果只有一种确定的取值。</p>

<h4 id="个体间无交互效应">个体间无交互效应</h4>

<p>这个假定的前半部分要求每个个体的潜在结果不依赖于其他个体的处理方式。在头痛的例子中，这个假定的意思便是指一个个体服药与否不会影响其他个体在不同处理水平下的潜在结果。需要注意的是，这样的假定是否合理是需要实际去分析的。比如当个体之间有密切接触时，我们很难认为不同个体之间不存在交互作用，但如果我们考察的个体之间不存在接触关系，每个个体都在不同且相距较远的地方接受处理，那我们可以认为个体间不互相干扰的假定是合理的。</p>

<h4 id="无隐形的不同形式的处理水平">无隐形的不同形式的处理水平</h4>

<p>假定的后半部分讲，每个处理水平对应的潜在结果只有一种确定的情况，这其实是想说我们在描述处理方式是应当尽可能的精确。比如服用阿司匹林的这个例子，可能每个个体服用的阿司匹林是不同厂家的，其对应的药效也可能有所差别，每个人服用的剂量也可能有所不同，那这样得到的潜在结果也有对应的不同多个。再比如，每个人服用药物的主动性也可能是不同的，有的人是主动服用，有的人是被动服用，这样即使同样是服用药物，对应的潜在结果也可能是不同的。</p>

<h4 id="sutva的其他替代假设">SUTVA的其他替代假设</h4>

<p>尽管在之后的部分我们都使用了SUTVA这个假定，但在有的情形中，SUTVA并不一定合理，这是可能使用其他的一些替代假定会更为合适。比如在早期AIDS药物的实验中，有的病人为了避免安慰剂的使用，他们会选择只服用分配给他们的药物中的一部分，而把剩下的部分分给其他的病人。这种情形下，SUTVA不再是一个合理的假定了，不过我们可以把每个实验的亚组当作以一个个体，假定对这样的个体SUTVA成立就要更合理一些。</p>

<h3 id="the-assignment-mechanism">The Assignment Mechanism</h3>
<p>有了基本的假定，要进一步需要去估计因果效应，就需要对观测到的潜在结果进行分析。由于每一个个体我们都只能观测到一种潜在结果，那我们就需要知道为什么有的个体观测到的是一种处理水平下的潜在结果，而有的个体观测到的是另一种处理水平下的潜在结果。这背后就涉及到处理的分配机制（Assignment mechanism），即一种处理是以怎样的一种规则对每个个体进行分配的。比如，在研究药物疗效的问题中，医生在选择病人进行药物治疗时，可能选择对身体情况或者病症相对于严重的那部分病人使用药物，也可能选择耐药性更好的那部分病人使用药物。即使是同样的观测结果，在不同的分配机制下，我们也可能不到不同的结论。通常，我们需要对处理的分配机制做一些假定或者约束，才能够进一步对因果效应进行估计。这与在缺失数据问题中，我们常常关心数据缺失的机制是相同的道理。</p>

<h3 id="pre-treatment-variables">Pre-treatment Variables</h3>

<p>假定总体有$N$个个体，记$W_i$为第$i$个个体的处理水平，若个体$i$在处理组，则$W_i$取1，在控制组则取0。记$Y^{obs}_i$为已发生的（可能已经观测到的）结果:</p>

\[Y_{i}^{\mathrm{obs}}=Y_{i}\left(W_{i}\right)=\left\{\begin{array}{ll}
Y_{i}(0) &amp; \text { if } W_{i}=0 \\
Y_{i}(1) &amp; \text { if } W_{i}=1
\end{array}\right.\]

<p>同样的，我们可以记为缺失的潜在结果为$Y^{mis}_i$:</p>

\[Y_{i}^{\text {mis }}=Y_{i}\left(1-W_{i}\right)=\left\{\begin{array}{ll}
Y_{i}(1) &amp; \text { if } W_{i}=0 \\
Y_{i}(0) &amp; \text { if } W_{i}=1
\end{array}\right.\]

<p>要估计某种处理对于一个个体的因果效应，我们通常需要对缺失的那部分潜在结果进行填补或者预测。通常来说这个工作是相对困难的，而此时每个个体的一些协变量的信息往往可以帮助我们对来预测或者填补缺失的潜在结果，我们记$X_i$为个体$i$的一个$K$维的协变量。比如我们想要研究职业训练对于个人未来收入的作用，那么个体在职业训练前的受教育水平、社会经济地位等协变量都会对潜在结果有一定的相关关系，我们可以利用其中的信息对于缺失的潜在结果进行预测和填补。我们通常称这样的变量维处理前变量（Pre-treatment Variables）,即在处理分配到每个变量之前，这些变量的信息就已经存在了。</p>

<p>这些变量主要有以下三种用处：</p>

<ul>
  <li>
    <p>由于这些变量可以对潜在结果进行一部分的解释，由此我们可以更精确地对潜在结果进行估计；</p>
  </li>
  <li>
    <p>帮助研究者对其感兴趣的群体进行因果效应分析。通常我们可能会关心一种处理在不同子群体或某个特定群体中的因果效应，如一种药物对于男性和女性分别的作用，因此利用性别这个协变量的信息可以帮助我们对每个特定的群体进行进一步的分析。</p>
  </li>
  <li>
    <p>可以利用协变量的信息对分配机制进行分析。处理的分配机制可能与协变量有关。这也是协变量最为主要的一个作用。通常处理的分配是根据个体的某个或某些协变量的取值来确定的。比如之前提到过的，病症越严重的病人，医生给他们服用药物的可能性越大，此时病人的病症严重情况与药物分配的机制以及潜在结果都有相关关系，此时潜在结果与处理变量之间并非是独立的。但我们可以认为在病症严重程度相同的各个亚组中，处理变量与潜在结果是独立的。</p>
  </li>
</ul>

<h3 id="causal-estimands">Causal Estimands</h3>

<p>下面我们更加正式地来定义一下我们所关心的因果效应。假设每个个体的处理水平都为两种，即$W_i \in {0,1}$。我们可以通过比较两种处理水平下的潜在结果$Y_i(1)$和$Y_i(0)$来定义个体水平上的因果效应（unit-level causal effects)，如两者简单做差$Y_i(1)-Y_i(0)$或求比值$Y_{i}(1) / Y_{i}(0)$。通常来说用的更多的是做差的形式。</p>

<p>一个典型的因果估计目标（Causal Estimand）的例子为，整个总体的两个处理水平下的潜在结果差异的均值：</p>

\[\tau_{\mathrm{fs}}=\frac{1}{N} \sum_{i=1}^{N}\left(Y_{i}(1)-Y_{i}(0)\right)\]

<p>其中下标$\mathrm{fs}$代表有限样本。</p>

<p>类似地，我们可以定义不同的估计目标，如在某个特性群体（如女性）中的平均潜在结果差异等，也可将有限样本的情形推广到无限样本。</p>

<hr />

<h2 id="a-classification-of-assignment-mechanisms">A Classification of Assignment Mechanisms</h2>
:ET